<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Raxx Predictor</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            violet: {
              500: '#8b5cf6',
              600: '#7c3aed',
            },
            red: {
              500: '#ef4444',
              600: '#dc2626',
            },
            green: {
              500: '#10b981',
              600: '#059669',
            }
          },
          animation: {
            'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            'fade-in': 'fadeIn 0.5s ease-out forwards',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0', transform: 'translateY(10px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' }
            }
          }
        }
      }
    }
  </script>
  <style>
    .color-green { background-color: #10b981; }
    .color-red { background-color: #ef4444; }
    .color-violet { background-color: #8b5cf6; }
    .dark .glow {
      box-shadow: 0 0 10px 2px;
    }
  </style>
</head>
<body class="min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-300">
  <div class="container mx-auto px-4 py-8 max-w-3xl">
    <!-- Header -->
    <header class="flex justify-between items-center mb-10">
      <h1 class="text-3xl font-bold text-gray-800 dark:text-white">Raxx Predictor</h1>
      <button id="themeToggle" class="p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
        </svg>
      </button>
    </header>

    <!-- Main Content -->
    <main>
      <!-- Input Section -->
      <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-8 transition-all duration-300">
        <h2 class="text-xl font-semibold text-gray-800 dark:text-white mb-4">Enter Last 5 Numbers</h2>
        <div class="flex flex-col space-y-4">
          <input 
            type="text" 
            id="numberInput" 
            placeholder="e.g. 1,3,5,2,4" 
            class="px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
          >
          <button 
            id="predictBtn" 
            class="bg-purple-600 hover:bg-purple-700 text-white font-medium py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50"
          >
            Predict Next Number
          </button>
        </div>
      </div>

      <!-- Prediction Display -->
      <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-8 transition-all duration-300 animate-fade-in" id="predictionCard" style="display: none;">
        <h2 class="text-xl font-semibold text-gray-800 dark:text-white mb-6">Prediction Result</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <!-- Color Prediction -->
          <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
            <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">Color</h3>
            <div class="flex items-center space-x-3">
              <div id="colorIndicator" class="h-10 w-10 rounded-full"></div>
              <span id="colorValue" class="text-lg font-semibold text-gray-800 dark:text-white">-</span>
            </div>
          </div>
          
          <!-- Size Prediction -->
          <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
            <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">Size</h3>
            <span id="sizeValue" class="text-lg font-semibold text-gray-800 dark:text-white">-</span>
          </div>
          
          <!-- Number Prediction -->
          <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
            <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">Suggested Number</h3>
            <div id="numberValue" class="text-3xl font-bold text-gray-800 dark:text-white text-center">-</div>
          </div>
        </div>
      </div>

      <!-- History Section -->
      <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-xl font-semibold text-gray-800 dark:text-white">Prediction History</h2>
          <button id="clearHistory" class="text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors">Clear</button>
        </div>
        
        <div class="space-y-3" id="historyContainer">
          <!-- History items will be added here -->
          <div class="text-center py-4 text-gray-500 dark:text-gray-400" id="emptyHistory">
            No predictions yet.
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    // Game definitions
    const colorMap = {
      0: 'violet',
      1: 'green',
      2: 'red',
      3: 'green',
      4: 'red',
      5: 'violet',
      6: 'red',
      7: 'green',
      8: 'red',
      9: 'violet'
    };

    const sizeMap = {
      0: 'big',
      1: 'small',
      2: 'small',
      3: 'small',
      4: 'big',
      5: 'big',
      6: 'big',
      7: 'small',
      8: 'big',
      9: 'small'
    };

    // DOM Elements
    const themeToggle = document.getElementById('themeToggle');
    const numberInput = document.getElementById('numberInput');
    const predictBtn = document.getElementById('predictBtn');
    const predictionCard = document.getElementById('predictionCard');
    const colorIndicator = document.getElementById('colorIndicator');
    const colorValue = document.getElementById('colorValue');
    const sizeValue = document.getElementById('sizeValue');
    const numberValue = document.getElementById('numberValue');
    const historyContainer = document.getElementById('historyContainer');
    const emptyHistory = document.getElementById('emptyHistory');
    const clearHistory = document.getElementById('clearHistory');

    // State
    let predictionsHistory = JSON.parse(localStorage.getItem('raxxPredictions')) || [];

    // Initialize
    renderHistory();

    // Event Listeners
    themeToggle.addEventListener('click', toggleTheme);
    predictBtn.addEventListener('click', handlePrediction);
    clearHistory.addEventListener('click', clearHistoryItems);
    numberInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') handlePrediction();
    });

    // Functions
    function toggleTheme() {
      document.documentElement.classList.toggle('dark');
    }

    function handlePrediction() {
      const input = numberInput.value.trim();
      if (!input) {
        alert('Please enter 5 comma-separated numbers (e.g., "1,3,5,2,4")');
        return;
      }

      const numbers = input.split(',').map(num => parseInt(num.trim(), 10));
      if (numbers.length !== 5 || numbers.some(isNaN) || numbers.some(n => n < 0 || n > 9)) {
        alert('Please enter exactly 5 valid numbers between 0 and 9, comma-separated');
        return;
      }

      const prediction = predictNextNumber(numbers);
      showPrediction(prediction);
      saveToHistory(prediction);
    }

    function predictNextNumber(numbers) {
      // Analyze last 5 numbers
      const lastFive = numbers.map(n => ({
        number: n,
        color: colorMap[n],
        size: sizeMap[n]
      }));

      // Color prediction (reverse if 3+ of same color)
      const colorCounts = lastFive.reduce((acc, curr) => {
        acc[curr.color] = (acc[curr.color] || 0) + 1;
        return acc;
      }, {});

      let predictedColor;
      if (Object.values(colorCounts).some(count => count >= 3)) {
        // Reverse the most frequent color
        const mostFrequentColor = Object.keys(colorCounts).reduce((a, b) => 
          colorCounts[a] > colorCounts[b] ? a : b
        );
        predictedColor = mostFrequentColor === 'green' ? 'red' : 
                         mostFrequentColor === 'red' ? 'violet' : 'green';
      } else {
        // Default to trend continuation (most recent color)
        predictedColor = lastFive[lastFive.length - 1].color;
      }

      // Size prediction (reverse dominant size)
      const sizeCounts = lastFive.reduce((acc, curr) => {
        acc[curr.size] = (acc[curr.size] || 0) + 1;
        return acc;
      }, {});

      const dominantSize = sizeCounts.big > sizeCounts.small ? 'big' : 'small';
      const predictedSize = dominantSize === 'big' ? 'small' : 'big';

      // Number prediction (random from numbers matching predicted color and size)
      const possibleNumbers = [0,1,2,3,4,5,6,7,8,9].filter(num => 
        colorMap[num] === predictedColor && sizeMap[num] === predictedSize
      );

      const predictedNumber = possibleNumbers.length > 0 
        ? possibleNumbers[Math.floor(Math.random() * possibleNumbers.length)]
        : Math.floor(Math.random() * 10); // fallback

      return {
        number: predictedNumber,
        color: predictedColor,
        size: predictedSize,
        timestamp: new Date().toLocaleString()
      };
    }

    function showPrediction(prediction) {
      predictionCard.style.display = 'block';
      
      // Color
      colorIndicator.className = `h-10 w-10 rounded-full glow color-${prediction.color}`;
      colorValue.textContent = prediction.color.charAt(0).toUpperCase() + prediction.color.slice(1);
      
      // Size
      sizeValue.textContent = prediction.size.charAt(0).toUpperCase() + prediction.size.slice(1);
      
      // Number
      numberValue.textContent = prediction.number;
      numberValue.className = `text-3xl font-bold text-center 
        ${prediction.color === 'green' ? 'text-green-600' : 
          prediction.color === 'red' ? 'text-red-600' : 
          'text-violet-600'}`;

      // Animation
      predictionCard.style.animation = 'fade-in 0.5s ease-out forwards';
    }

    function saveToHistory(prediction) {
      predictionsHistory.unshift(prediction);
      if (predictionsHistory.length > 10) {
        predictionsHistory = predictionsHistory.slice(0, 10);
      }
      localStorage.setItem('raxxPredictions', JSON.stringify(predictionsHistory));
      renderHistory();
    }

    function renderHistory() {
      if (predictionsHistory.length === 0) {
        emptyHistory.style.display = 'block';
        return;
      }

      emptyHistory.style.display = 'none';
      historyContainer.innerHTML = predictionsHistory.map((pred, idx) => `
        <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg animate-fade-in">
          <div class="flex items-center space-x-3">
            <div class="h-6 w-6 rounded-full ${`color-${pred.color}`} ${pred.color === 'violet' ? 'glow' : ''}"></div>
            <span class="font-medium text-gray-800 dark:text-white">${pred.number}</span>
          </div>
          <div class="flex items-center space-x-4 text-sm">
            <span class="text-gray-500 dark:text-gray-300 capitalize">${pred.size}</span>
            <span class="text-gray-400 dark:text-gray-400 text-xs">${pred.timestamp}</span>
          </div>
        </div>
      `).join('');
    }

    function clearHistoryItems() {
      predictionsHistory = [];
      localStorage.removeItem('raxxPredictions');
      renderHistory();
      emptyHistory.style.display = 'block';
    }
  </script>
</body>
</html>

