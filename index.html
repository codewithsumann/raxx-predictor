<!DOCTYPE html>
<html lang="en" class="min-h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raxx Predictor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="min-h-full bg-gray-100 dark:bg-gray-900 transition-colors duration-200">
    <div class="container mx-auto px-4 py-8">
        <header class="flex justify-between items-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800 dark:text-white">Raxx Predictor</h1>
            <button id="theme-toggle" class="p-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">
                <svg id="theme-icon" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path id="theme-path" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
            </button>
        </header>

        <main class="max-w-md mx-auto">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                <div class="mb-6">
                    <h2 class="text-xl font-semibold text-gray-800 dark:text-gray-200 mb-2">Enter Previous Numbers</h2>
                    <div class="flex items-center space-x-2">
                        <input type="text" id="number-input" placeholder="1,3,5,2,4" class="flex-1 p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-colors">
                        <button id="predict-btn" class="px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors">Predict</button>
                    </div>
                    <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">Enter last 5 numbers (0-9), separated by commas</p>
                </div>

                <div id="result" class="hidden mb-6">
                    <h2 class="text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4">Prediction Results</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-lg">
                            <h3 class="font-medium text-gray-700 dark:text-gray-300 mb-2">Color Analysis</h3>
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 rounded-full bg-green-500"></div>
                                <span class="text-gray-600 dark:text-gray-400">Green:</span>
                                <span id="green-count" class="font-medium">0</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 rounded-full bg-red-500"></div>
                                <span class="text-gray-600 dark:text-gray-400">Red:</span>
                                <span id="red-count" class="font-medium">0</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 rounded-full bg-purple-500"></div>
                                <span class="text-gray-600 dark:text-gray-400">Violet:</span>
                                <span id="violet-count" class="font-medium">0</span>
                            </div>
                        </div>

                        <div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-lg">
                            <h3 class="font-medium text-gray-700 dark:text-gray-300 mb-2">Size Analysis</h3>
                            <div class="flex items-center space-x-2">
                                <div class="text-gray-600 dark:text-gray-400">Big (5-9):</div>
                                <span id="big-count" class="font-medium">0</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="text-gray-600 dark:text-gray-400">Small (0-4):</div>
                                <span id="small-count" class="font-medium">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-lg mb-4">
                        <h3 class="font-medium text-gray-700 dark:text-gray-300 mb-2">Prediction</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                            <div class="bg-white dark:bg-gray-600 p-3 rounded shadow">
                                <div class="text-sm text-gray-500 dark:text-gray-400">Color:</div>
                                <div id="predicted-color" class="font-bold"></div>
                            </div>
                            <div class="bg-white dark:bg-gray-600 p-3 rounded shadow">
                                <div class="text-sm text-gray-500 dark:text-gray-400">Size:</div>
                                <div id="predicted-size" class="font-bold"></div>
                            </div>
                            <div class="bg-blue-100 dark:bg-blue-900 p-3 rounded shadow">
                                <div class="text-sm text-blue-500 dark:text-blue-300">Suggested Number:</div>
                                <div id="predicted-number" class="font-bold text-xl dark:text-white"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="history-section">
                    <div class="flex justify-between items-center mb-2">
                        <h2 class="text-xl font-semibold text-gray-800 dark:text-gray-200">History</h2>
                        <button id="clear-history" class="text-sm text-red-500 hover:text-red-700 dark:hover:text-red-400">Clear</button>
                    </div>
                    <div id="history-container" class="space-y-2 max-h-64 overflow-y-auto">
                        <div class="text-center text-gray-500 dark:text-gray-400 py-4">No history yet</div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="mt-8 text-center text-gray-600 dark:text-gray-400 text-sm">
            <p>Raxx Predictor - Predicting numbers based on color and size patterns</p>
        </footer>
    </div>

    <script>
        // Theme Toggle
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const themePath = document.getElementById('theme-path');

        if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
            themePath.setAttribute('d', 'M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 眠 0 0012 21a9.003 9.003 0 008.354-5.646z');
        } else {
            document.documentElement.classList.remove('dark');
        }

        themeToggle.addEventListener('click', function() {
            if (localStorage.getItem('color-theme') === 'dark') {
                localStorage.setItem('color-theme', 'light');
                document.documentElement.classList.remove('dark');
                themePath.setAttribute('d', 'M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364眠-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 眠z');
            } else {
                localStorage.setItem('color-theme', 'dark');
                document.documentElement.classList.add('dark');
                themePath.setAttribute('d', 'M20.354 15.354眠 9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z');
            }
        });

        // Prediction Logic
        function getColor(number) {
            if ([1, 3, 7, 9].includes(number)) return 'Green';
            if ([2, 4, 6, 8].includes(number)) return 'Red';
            if ([0, 5].includes(number)) return 'Violet';
            return 'Unknown';
        }

        function getSize(number) {
            return number >= 5 ? 'Big' : 'Small';
        }

        function predict(numbers) {
            // Count colors
            const colorCounts = { Green: 0, Red: 0, Violet: 0 };
            const sizeCounts = { Big: 0, Small: 0 };
            
            numbers.forEach(num => {
                colorCounts[getColor(num)]++;
                sizeCounts[getSize(num)]++;
            });

            // Determine predicted color
            let predictedColor;
            if (colorCounts.Green >= 3) predictedColor = 'Red';
            else if (colorCounts.Red >= 3) predictedColor = 'Green';
            else if (colorCounts.Violet >= 3) predictedColor = 'Green';
            else {
                // Find least frequent color
                const minColor = Object.entries(colorCounts).reduce((min, entry) => 
                    entry[1] < min[1] ? entry : min, ['Green', colorCounts.Green]);
                predictedColor = minColor[0];
            }

            // Determine predicted size
            let predictedSize;
            if (sizeCounts.Big >= 3) predictedSize = 'Small';
            else if (sizeCounts.Small >= 3) predictedSize = 'Big';
            else {
                // Find least frequent size
                const minSize = Object.entries(sizeCounts).reduce((min, entry) => 
                    entry[1] < min[1] ? entry : min, ['Big', sizeCounts.Big]);
                predictedSize = minSize[0];
            }

            // Generate possible numbers matching predicted color and size
            const allNumbers = [0,1,2,3,4,5,6,7,8,9];
            const possibleNumbers = allNumbers.filter(num => 
                getColor(num) === predictedColor && getSize(num) === predictedSize);
            
            // Select random number from possible numbers
            const suggestedNumber = possibleNumbers.length > 0 
                ? possibleNumbers[Math.floor(Math.random() * possibleNumbers.length)]
                : Math.floor(Math.random() * 10);

            return {
                colorCounts,
                sizeCounts,
                predictedColor,
                predictedSize,
                suggestedNumber
            };
        }

        // Store and display history
        let history = JSON.parse(localStorage.getItem('raxx-history')) || [];

        function updateHistoryDisplay() {
            const historyContainer = document.getElementById('history-container');
            historyContainer.innerHTML = '';
            
            if (history.length === 0) {
                historyContainer.innerHTML = '<div class="text-center text-gray-500 dark:text-gray-400 py-4">No history yet</div>';
                return;
            }

            history.slice().reverse().forEach(item => {
                const colorClass = {
                    'Green': 'bg-green-100 dark:bg-green-900',
                    'Red': 'bg-red-100 dark:bg-red-900',
                    'Violet': 'bg-purple-100 dark:bg-purple-900'
                }[item.predictedColor];

                const sizeClass = {
                    'Big': 'text-gray-800 dark:text-white',
                    'Small': 'text-gray-800 dark:text-white'
                };

                const historyItem = document.createElement('div');
                historyItem.className = 'fade-in grid grid-cols-3 gap-2 p-3 rounded-lg';
                historyItem.innerHTML = `
                    <div class="flex items-center ${colorClass} p-2 rounded">
                        <div class="w-3 h-3 rounded-full mr-2 ${
                            item.predictedColor === 'Green' ? 'bg-green-500' : 
                            item.predictedColor === 'Red' ? 'bg-red-500' : 'bg-purple-500'
                        }"></div>
                        ${item.predictedColor}
                    </div>
                    <div class="flex items-center bg-gray-100 dark:bg-gray-700 ${sizeClass} p-2 rounded">
                        ${item.predictedSize}
                    </div>
                    <div class="flex items-center justify-center bg-blue-100 dark:bg-blue-900 text-xl font-bold p-2 rounded">
                        ${item.suggestedNumber}
                    </div>
                `;
                historyContainer.appendChild(historyItem);
            });
        }

        // Clear history
        document.getElementById('clear-history').addEventListener('click', function() {
            history = [];
            localStorage.setItem('raxx-history', JSON.stringify(history));
            updateHistoryDisplay();
        });

        // Main prediction handler
        document.getElementById('predict-btn').addEventListener('click', function() {
            const input = document.getElementById('number-input').value.trim();
            if (!input) return;

            // Parse input
            let numbers;
            try {
                numbers = input.split(',').map(num => {
                    const parsed = parseInt(num.trim());
                    if (isNaN(parsed) || parsed < 0 || parsed > 9) {
                        throw new Error('Invalid number');
                    }
                    return parsed;
                });
                
                if (numbers.length !== 5) {
                    alert('Please enter exactly 5 numbers, separated by commas');
                    return;
                }
            } catch (e) {
                alert('Invalid input. Please enter numbers from 0-9, separated by commas. Example: 1,3,5,2,4');
                return;
            }

            // Run prediction
            const prediction = predict(numbers);

            // Update UI
            document.getElementById('green-count').textContent = prediction.colorCounts.Green;
            document.getElementById('red-count').textContent = prediction.colorCounts.Red;
            document.getElementById('violet-count').textContent = prediction.colorCounts.Violet;
            document.getElementById('big-count').textContent = prediction.sizeCounts.Big;
            document.getElementById('small-count').textContent = prediction.sizeCounts.Small;
            
            document.getElementById('predicted-color').textContent = prediction.predictedColor;
            document.getElementById('predicted-size').textContent = prediction.predictedSize;
            document.getElementById('predicted-number').textContent = prediction.suggestedNumber;

            // Show result section
            document.getElementById('result').classList.remove('hidden');

            // Add to history
            history.push({
                inputNumbers: numbers,
                predictedColor: prediction.predictedColor,
                predictedSize: prediction.predictedSize,
                suggestedNumber: prediction.suggestedNumber,
                timestamp: new Date().toISOString()
            });

            // Keep only last 20 predictions
            if (history.length > 20) {
                history = history.slice(history.length - 20);
            }

            localStorage.setItem('raxx-history', JSON.stringify(history));
            updateHistoryDisplay();
        });

        // Initialize
        updateHistoryDisplay();
    </script>
</body>
</html>

